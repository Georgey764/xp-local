@import "tailwindcss";

/* Enable class-based dark mode (works alongside media query) */
@custom-variant dark (&:where(.dark, .dark *));

/* Define theme colors (generates bg-primary, text-accent, etc.) */
@theme {
  /* Primary – Electric Violet (CTAs, progress, main actions) */
  --color-primary: oklch(64% 0.24 274);
  --color-primary-600: oklch(58% 0.23 274);
  --color-primary-700: oklch(50% 0.22 274);

  /* Accent – Neon Lime Glow (badges, streaks, highlights) */
  --color-accent: oklch(88% 0.19 118);
  --color-accent-600: oklch(80% 0.18 118);

  /* Reward – Golden pop (achievements, +XP, special) */
  --color-reward: oklch(84% 0.17 75);
  --color-reward-600: oklch(76% 0.16 75);

  /* Neutral scale */
  --color-neutral-50: oklch(99% 0.005 60);
  --color-neutral-100: oklch(96% 0.01 60);
  --color-neutral-200: oklch(92% 0.015 60);
  --color-neutral-800: oklch(28% 0.04 260);
  --color-neutral-950: oklch(14% 0.02 260);

  /* Semantic base colors */
  --color-background: var(--color-neutral-50);
  --color-foreground: oklch(18% 0.06 260);
  --color-surface: var(--color-neutral-50);
  --color-border: var(--color-neutral-200);
}

/* Dark mode overrides (applied via class OR media query) */
.dark {
  --color-background: var(--color-neutral-950);
  --color-foreground: oklch(92% 0.02 260);
  --color-surface: oklch(22% 0.03 260);
  --color-border: oklch(40% 0.03 260);

  /* Soften vivid colors for dark mode comfort */
  --color-primary: oklch(72% 0.23 274);
  --color-primary-600: oklch(66% 0.22 274);
  --color-accent: oklch(92% 0.16 118);
  --color-accent-600: oklch(84% 0.15 118);
  --color-reward: oklch(88% 0.16 75);
}

/* System preference fallback (when no .dark/.light class is set) */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --color-background: var(--color-neutral-950);
    --color-foreground: oklch(92% 0.02 260);
    --color-surface: oklch(22% 0.03 260);
    --color-border: oklch(40% 0.03 260);

    --color-primary: oklch(72% 0.23 274);
    --color-accent: oklch(92% 0.16 118);
    --color-reward: oklch(88% 0.16 75);
  }
}

/* Base layer styles */
@layer base {
  :root {
    --background: var(--color-background);
    --foreground: var(--color-foreground);
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "cv03", "cv04", "ss01";
  }

  /* Improved focus states for gamification accessibility */
  :focus-visible {
    @apply outline-none ring-2 ring-primary/70 ring-offset-2 ring-offset-background;
  }
}
